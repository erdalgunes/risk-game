(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[184],{7725:function(e,t,r){Promise.resolve().then(r.bind(r,5181))},5181:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return D}});var o=r(509),n=r(3263),i=r(5789),a=r(3889),s=r(4634),l=r(6794),c=r(112),d=r(7565),x=r(7462),p=r(9040),u=r(7779),h=r(9767);function m(e){let{open:t,onOpen:r,onClose:n,gameState:a}=e,m=function(e,t){let r=[];for(let o of i.bO)o.territories.every(r=>e.territories[r].owner===t)&&r.push(o.displayName);return r}(a,a.currentPlayer);return(0,o.jsxs)(s.Z,{anchor:"bottom",open:t,onOpen:r,onClose:n,disableSwipeToOpen:!1,sx:{"& .MuiDrawer-paper":{maxHeight:"70vh",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",overflow:"auto"}},children:[(0,o.jsx)(l.Z,{sx:{width:"40px",height:"4px",backgroundColor:"grey.600",borderRadius:"2px",margin:"8px auto"}}),(0,o.jsxs)(l.Z,{sx:{p:3,pb:4},children:[(0,o.jsxs)(l.Z,{sx:{mb:3,display:"flex",gap:1,flexWrap:"wrap"},children:[(0,o.jsx)(c.Z,{label:"".concat(a.currentPlayer.toUpperCase()),sx:{backgroundColor:h.u[a.currentPlayer],color:"white",fontWeight:"bold",minHeight:"48px",fontSize:"1rem"}}),(0,o.jsx)(c.Z,{label:a.phase.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),variant:"outlined",sx:{minHeight:"48px",fontSize:"1rem"}})]}),(0,o.jsx)(d.Z,{variant:"h6",gutterBottom:!0,children:"Player Statistics"}),(0,o.jsx)(x.ZP,{container:!0,spacing:2,sx:{mb:3},children:a.players.filter(e=>"neutral"!==e).map(e=>{let t=Object.values(a.territories).filter(t=>t.owner===e).map(e=>e.id),r=(0,i.Oc)(e,a.territories),n=Object.values(a.territories).filter(t=>t.owner===e).reduce((e,t)=>e+t.troops,0);return(0,o.jsx)(x.ZP,{item:!0,xs:12,sm:6,children:(0,o.jsx)(p.Z,{variant:"outlined",sx:{borderLeft:"4px solid ".concat(h.u[e])},children:(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(d.Z,{variant:"subtitle1",fontWeight:"bold",color:h.u[e],gutterBottom:!0,children:e.toUpperCase()}),(0,o.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Territories: ",t.length]}),(0,o.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Total Troops: ",n]}),(0,o.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Continent Bonus: +",r]})]})})},e)})}),m.length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.Z,{variant:"h6",gutterBottom:!0,children:"Your Continents"}),(0,o.jsx)(l.Z,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:m.map(e=>(0,o.jsx)(c.Z,{label:e,color:"success",sx:{minHeight:"48px",fontSize:"0.9rem"}},e))})]})]})]})}var f=r(2493),b=r(936),y=r(4161);function g(e){return e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}function j(e){let{open:t,onOpen:r,onClose:n,gameState:i,selectedTerritory:a,fortifyTroops:x,onFortifyTroopsChange:m,transferTroops:j,onTransferTroopsChange:v}=e;return(0,o.jsxs)(s.Z,{anchor:"bottom",open:t,onOpen:r,onClose:n,disableSwipeToOpen:!1,sx:{"& .MuiDrawer-paper":{maxHeight:"80vh",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",overflow:"auto"}},children:[(0,o.jsx)(l.Z,{sx:{width:"40px",height:"4px",backgroundColor:"grey.600",borderRadius:"2px",margin:"8px auto"}}),(0,o.jsx)(l.Z,{sx:{p:3,pb:4},children:(()=>{switch(i.phase){case"initial_placement":{var e,t;let r=null!==(t=null===(e=i.unplacedTroops)||void 0===e?void 0:e[i.currentPlayer])&&void 0!==t?t:0,n=i.initialPlacementSubPhase;return(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(f.Z,{severity:"info",sx:{mb:2},children:"claiming"===n?"Click on an unclaimed territory to claim it":"Click on your territories to place troops"}),(0,o.jsx)(p.Z,{variant:"outlined",children:(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(d.Z,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:r}),(0,o.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:"Troops Remaining"})]})})]})}case"deploy":{let e=function(e){let t=Math.max(3,Math.floor(Object.values(e.territories).filter(t=>t.owner===e.currentPlayer).length/3)),r=e.deployableTroops>0?Math.max(0,e.deployableTroops-t):0;return{base:t,continents:r,total:e.deployableTroops}}(i);return(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(f.Z,{severity:"info",sx:{mb:2},children:"Click your territories to deploy troops. Shift+Click to deploy all."}),(0,o.jsx)(p.Z,{variant:"outlined",sx:{mb:2},children:(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(d.Z,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:i.deployableTroops}),(0,o.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:"Deployable Troops"})]})}),(0,o.jsx)(d.Z,{variant:"subtitle2",gutterBottom:!0,children:"Income Breakdown:"}),(0,o.jsxs)(l.Z,{sx:{pl:2},children:[(0,o.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Base: +",e.base]}),(0,o.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["Continent Bonus: +",e.continents]})]})]})}case"attack":{if(!a)return(0,o.jsx)(f.Z,{severity:"info",children:"Select one of your territories with 2+ troops to attack from"});let e=i.territories[a];return(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(d.Z,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:"Attacking From:"}),(0,o.jsx)(c.Z,{label:"".concat(g(a)," (").concat(e.troops," troops)"),sx:{backgroundColor:h.u[e.owner],color:"white",mb:2,minHeight:"48px",fontSize:"1rem"}}),(0,o.jsx)(f.Z,{severity:"info",children:"Click an adjacent enemy territory to attack"}),i.lastAttackResult&&(0,o.jsx)(p.Z,{variant:"outlined",sx:{mt:2},children:(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(d.Z,{variant:"subtitle2",gutterBottom:!0,children:"Last Attack Result:"}),(0,o.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:"Attacker Dice:"}),(0,o.jsx)(d.Z,{variant:"body1",children:i.lastAttackResult.attackerRolls.join(", ")})]}),(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(d.Z,{variant:"body2",color:"text.secondary",children:"Defender Dice:"}),(0,o.jsx)(d.Z,{variant:"body1",children:i.lastAttackResult.defenderRolls.join(", ")})]})]}),(0,o.jsxs)(d.Z,{variant:"body2",color:"error.main",children:["Attacker Lost: ",i.lastAttackResult.attackerLost]}),(0,o.jsxs)(d.Z,{variant:"body2",color:"success.main",children:["Defender Lost: ",i.lastAttackResult.defenderLost]}),i.lastAttackResult.conquered&&(0,o.jsx)(c.Z,{label:"Territory Conquered!",color:"success",size:"small",sx:{mt:1}})]})})]})}case"attack_transfer":{if(!i.pendingTransfer)return null;let{from:e,to:t,minTroops:r,maxTroops:n}=i.pendingTransfer;return(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(d.Z,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:"Territory Conquered!"}),(0,o.jsxs)(l.Z,{sx:{mb:2},children:[(0,o.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["From: ",g(e)]}),(0,o.jsxs)(d.Z,{variant:"body2",color:"text.secondary",children:["To: ",g(t)]})]}),(0,o.jsx)(f.Z,{severity:"success",sx:{mb:2},children:"Choose how many troops to move into the conquered territory"}),(0,o.jsxs)(d.Z,{variant:"body2",gutterBottom:!0,children:["Troops to Transfer: ",j]}),(0,o.jsx)(b.ZP,{value:j,onChange:(e,t)=>v(t),min:r,max:n,marks:!0,valueLabelDisplay:"auto",sx:{minHeight:"48px",mt:2}}),(0,o.jsxs)(d.Z,{variant:"caption",color:"text.secondary",children:["Min: ",r," | Max: ",n]})]})}case"fortify":{if(i.fortifiedThisTurn)return(0,o.jsx)(f.Z,{severity:"info",children:'Already fortified this turn. Click "End Turn" to finish.'});if(!a)return(0,o.jsx)(f.Z,{severity:"info",children:"Select one of your territories with 2+ troops to move troops from"});let e=i.territories[a],t=e.troops-1;return(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(d.Z,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:"Moving From:"}),(0,o.jsx)(c.Z,{label:"".concat(g(a)," (").concat(e.troops," troops)"),sx:{backgroundColor:h.u[e.owner],color:"white",mb:2,minHeight:"48px",fontSize:"1rem"}}),(0,o.jsx)(f.Z,{severity:"info",sx:{mb:2},children:"Click a connected territory you own to move troops"}),(0,o.jsx)(y.Z,{label:"Troops to Move",type:"number",value:x,onChange:e=>m(Math.max(1,Math.min(t,parseInt(e.target.value)||1))),inputProps:{min:1,max:t},fullWidth:!0,sx:{"& .MuiInputBase-root":{minHeight:"48px"}}}),(0,o.jsxs)(d.Z,{variant:"caption",color:"text.secondary",sx:{mt:1},children:["Max: ",t]})]})}default:return null}})()})]})}var v=r(1878);function Z(e){let{gameState:t,onSkip:r,onTransfer:n}=e,i=(()=>{switch(t.phase){case"deploy":return 0===t.deployableTroops?"To Attack":"Deploy All";case"attack":return"Skip to Fortify";case"fortify":return"End Turn";case"attack_transfer":return"Confirm Transfer";default:return""}})();return i?(0,o.jsx)(v.Z,{variant:"extended",color:"primary",onClick:()=>{"attack_transfer"===t.phase?n():r()},disabled:(()=>{switch(t.phase){case"deploy":case"attack":case"fortify":return!1;case"attack_transfer":return!t.pendingTransfer;default:return!0}})(),sx:{position:"fixed",bottom:{xs:80,md:16},right:16,minHeight:"48px",minWidth:"48px",zIndex:1100},children:i}):null}var k=r(7454),C=r(4339),w=r(3206),T=r(4239),S=r(4110);function R(e){let{value:t,onChange:r}=e;return(0,o.jsx)(k.Z,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,display:{xs:"block",md:"none"}},elevation:8,children:(0,o.jsxs)(C.Z,{value:t,onChange:(e,t)=>r(t),showLabels:!0,sx:{height:"64px","& .MuiBottomNavigationAction-root":{minHeight:"64px",minWidth:"80px"}},children:[(0,o.jsx)(w.Z,{label:"Stats",value:"stats",icon:(0,o.jsx)(T.Z,{})}),(0,o.jsx)(w.Z,{label:"Actions",value:"action",icon:(0,o.jsx)(S.Z,{})})]})})}var B=r(7206),A=r(7850);function M(e){let{value:t,onChange:r}=e;return(0,o.jsxs)(l.Z,{sx:{display:{xs:"none",md:"flex"},flexDirection:"column",width:"72px",height:"100vh",position:"fixed",left:0,top:0,backgroundColor:"background.paper",borderRight:1,borderColor:"divider",alignItems:"center",paddingTop:"16px",gap:"8px",zIndex:1e3},children:[(0,o.jsx)(B.Z,{title:"Stats",placement:"right",children:(0,o.jsx)(A.Z,{onClick:()=>r("stats"),color:"stats"===t?"primary":"default",sx:{width:"56px",height:"56px",borderRadius:"16px",backgroundColor:"stats"===t?"action.selected":"transparent","&:hover":{backgroundColor:"stats"===t?"action.selected":"action.hover"}},children:(0,o.jsx)(T.Z,{})})}),(0,o.jsx)(B.Z,{title:"Actions",placement:"right",children:(0,o.jsx)(A.Z,{onClick:()=>r("action"),color:"action"===t?"primary":"default",sx:{width:"56px",height:"56px",borderRadius:"16px",backgroundColor:"action"===t?"action.selected":"transparent","&:hover":{backgroundColor:"action"===t?"action.selected":"action.hover"}},children:(0,o.jsx)(S.Z,{})})})]})}var P=r(9947),O=r(3520);function D(){let[e,t]=(0,n.useState)(i.PA),{selectedTerritory:r,fortifyTroops:s,setFortifyTroops:l,transferTroops:c,setTransferTroops:d,message:x,handleTerritoryClick:p,handleSkip:u,handleTransfer:h,resetSelection:f}=(0,P.e)(e,t);(0,n.useEffect)(()=>{if(("blue"===e.currentPlayer||"neutral"===e.currentPlayer)&&!e.winner){let r=setTimeout(()=>{try{let r=(0,i.Dy)(e),o=(0,i.PL)(e,r);t(o),f()}catch(e){console.error("AI move error:",e)}},1e3);return()=>clearTimeout(r)}},[e,f]);let{activeDrawer:b,openDrawer:y,closeDrawer:g}=function(e){let[t,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{e&&"action"!==t&&r("action")},[e,t]),{activeDrawer:t,openDrawer:e=>{r(e)},closeDrawer:()=>{r(null)},toggleDrawer:e=>{r(t===e?null:e)}}}(r),v=e=>{b===e?g():y(e)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:"\n    .app-container {\n      display: flex;\n      min-height: 100vh;\n      background-color: #0a0a0a;\n    }\n\n    .main-content {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n      padding: 20px;\n      padding-bottom: 80px; /* Space for bottom nav on mobile */\n    }\n\n    @media (min-width: 768px) {\n      .main-content {\n        margin-left: 72px; /* Space for navigation rail on desktop */\n        padding-bottom: 20px; /* No bottom nav on desktop */\n      }\n    }\n\n    .game-board-container {\n      flex: 1;\n      display: flex;\n      flex-direction: column;\n    }\n  "}),(0,o.jsxs)("div",{className:"app-container",children:[(0,o.jsx)(M,{value:"stats"===b||"action"===b?b:null,onChange:v}),(0,o.jsxs)("div",{className:"main-content",children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,o.jsx)("h1",{style:{color:"white",margin:0},children:"Risk PoC - Single Player"}),(0,o.jsx)(O.default,{href:"/",style:{padding:"10px 20px",backgroundColor:"#555",color:"white",textDecoration:"none",borderRadius:"8px"},children:"Back to Menu"})]}),x&&(0,o.jsx)("div",{style:{padding:"15px",backgroundColor:"#2a2a2a",color:"white",borderRadius:"8px",marginBottom:"20px"},children:x}),(0,o.jsx)("div",{className:"game-board-container",children:(0,o.jsx)(a.t,{state:e,onTerritoryClick:(t,r)=>{"red"===e.currentPlayer&&p(t,"red",r)},selectedTerritory:r})})]}),(0,o.jsx)(m,{open:"stats"===b,onOpen:()=>y("stats"),onClose:g,gameState:e}),(0,o.jsx)(j,{open:"action"===b,onOpen:()=>y("action"),onClose:g,gameState:e,selectedTerritory:r,fortifyTroops:s,onFortifyTroopsChange:l,transferTroops:c,onTransferTroopsChange:d}),(0,o.jsx)(Z,{gameState:e,onSkip:u,onTransfer:h}),(0,o.jsx)(R,{value:"stats"===b||"action"===b?b:null,onChange:v})]})]})}},9767:function(e,t,r){"use strict";r.d(t,{r:function(){return i},u:function(){return n}});var o=r(2067);let n={red:"#ef4444",blue:"#3b82f6",green:"#22c55e",yellow:"#eab308",purple:"#a855f7",orange:"#f97316",neutral:"#9ca3af"},i=(0,o.Z)({palette:{mode:"dark",primary:{main:"#3b82f6"},secondary:{main:"#a855f7"},error:{main:"#ef4444"},warning:{main:"#f97316"},info:{main:"#3b82f6"},success:{main:"#22c55e"}},typography:{fontFamily:'-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"'},components:{MuiButton:{defaultProps:{disableElevation:!0},styleOverrides:{root:{minHeight:"48px",minWidth:"48px",textTransform:"none"}}},MuiIconButton:{styleOverrides:{root:{minHeight:"48px",minWidth:"48px"}}},MuiBottomNavigationAction:{styleOverrides:{root:{minHeight:"48px",minWidth:"48px"}}},MuiFab:{styleOverrides:{root:{minHeight:"48px",minWidth:"48px"}}},MuiDrawer:{styleOverrides:{paper:{backgroundImage:"none"}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}})}},function(e){e.O(0,[520,750,193,210,452,693,744],function(){return e(e.s=7725)}),_N_E=e.O()}]);